## action çš„åç§°
#name: Deploy GitHub Pages
#
## è§¦å‘æ¡ä»¶ï¼šåœ¨ push åˆ° main åˆ†æ”¯å
#on:
#  push:
#    branches:
#      - main
#
## ä»»åŠ¡
#jobs:
#  build-and-deploy:
#    # æœåŠ¡å™¨ç¯å¢ƒï¼šæœ€æ–°ç‰ˆ Ubuntu
#    runs-on: ubuntu-latest
#    steps:
#      # æ‹‰å–ä»£ç 
#      - name: Checkout
#        uses: actions/checkout@v2
#        with:
#          persist-credentials: false
#
#      # ç”Ÿæˆé™æ€æ–‡ä»¶
#      - name: Build
#        run: npm run docs:build
#
#      # éƒ¨ç½²åˆ° GitHub Pages
#      - name: Deploy
#        # ä½¿ç”¨åˆ«äººå†™å¥½çš„ä¸€ä¸ª action
#        uses: JamesIves/github-pages-deploy-action@v4.4.0
#        with:
#          # è¿™é‡Œçš„ ACCESS_TOKEN åå­—éœ€è¦å’Œä¸‹æ–‡ä¸­çš„ç›¸å¯¹åº”
#          ACCESS_TOKEN: ${{ secrets.FIG_ACCESS_TOKEN }}
#          # æ‰“åŒ…åçš„æ–‡ä»¶éƒ¨ç½²åˆ°å“ªä¸ªåˆ†æ”¯ä¸Š
#          BRANCH: gh-pages
#          # æ‰“åŒ…åçš„æ–‡ä»¶åœ¨å“ªé‡Œ
#          FOLDER: docs/.vitepress/dist/


name: Deploy V4 Site

on:
  push:
    branches: [main]

  workflow_dispatch:

jobs:
  build-and-deploy:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout ğŸ›ï¸
        uses: actions/checkout@v2
        with:
          ref: 'main'

      - name: Install pnpm
        run: npm i pnpm@7 -g

      - uses: actions/setup-node@v2
        with:
          node-version: '16'
          cache: 'pnpm'

      - name: Install dependencies
        run: pnpm install

      - name: Build Site
        run: pnpm run docs:build

      - name: Deploy ğŸš€
        uses: JamesIves/github-pages-deploy-action@v4.4.0
        with:
          branch: gh-pages
          token: ${{ secrets.FIG_ACCESS_TOKEN }}
          folder: docs/.vitepress/dist/

